{"ast":null,"code":"import React,{useEffect,useState}from'react';import{inventoryService}from'../services/inventoryService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reports=()=>{var _reports$turnoverRate,_reports$stockValuati,_reports$fastMoving,_reports$fastMoving2,_reports$slowMoving;const[reports,setReports]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{load();},[]);const load=async()=>{try{setLoading(true);const data=await inventoryService.getInventoryReports();setReports(data);}catch(e){setError('Failed to load reports');}finally{setLoading(false);}};const exportCSV=()=>{// Use relative path so the CRA proxy routes to backend (port 7090)\nwindow.location.href='/api/inventory/reports/export/csv';};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Reports & Analytics\"}),/*#__PURE__*/_jsx(\"div\",{className:\"page-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:exportCSV,children:\"Export CSV\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]}):reports?/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:((_reports$turnoverRate=reports.turnoverRate)===null||_reports$turnoverRate===void 0?void 0:_reports$turnoverRate.toFixed(2))||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Inventory Turnover Rate\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-number\",children:[\"$\",((_reports$stockValuati=reports.stockValuation)===null||_reports$stockValuati===void 0?void 0:_reports$stockValuati.toLocaleString())||0]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Stock Valuation\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:((_reports$fastMoving=reports.fastMoving)===null||_reports$fastMoving===void 0?void 0:_reports$fastMoving.length)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Fast-moving Products\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Fast-moving Products\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Supplier\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_reports$fastMoving2=reports.fastMoving)===null||_reports$fastMoving2===void 0?void 0:_reports$fastMoving2.map(p=>{var _p$supplier;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:p.category}),/*#__PURE__*/_jsx(\"td\",{children:((_p$supplier=p.supplier)===null||_p$supplier===void 0?void 0:_p$supplier.name)||'-'}),/*#__PURE__*/_jsx(\"td\",{children:p.quantity})]},p.id);})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Slow-moving Products\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Supplier\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_reports$slowMoving=reports.slowMoving)===null||_reports$slowMoving===void 0?void 0:_reports$slowMoving.map(p=>{var _p$supplier2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:p.category}),/*#__PURE__*/_jsx(\"td\",{children:((_p$supplier2=p.supplier)===null||_p$supplier2===void 0?void 0:_p$supplier2.name)||'-'}),/*#__PURE__*/_jsx(\"td\",{children:p.quantity})]},p.id);})})]})]})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No report data.\"})]});};export default Reports;","map":{"version":3,"names":["React","useEffect","useState","inventoryService","jsx","_jsx","jsxs","_jsxs","Reports","_reports$turnoverRate","_reports$stockValuati","_reports$fastMoving","_reports$fastMoving2","_reports$slowMoving","reports","setReports","loading","setLoading","error","setError","load","data","getInventoryReports","e","exportCSV","window","location","href","children","className","onClick","turnoverRate","toFixed","stockValuation","toLocaleString","fastMoving","length","map","p","_p$supplier","name","category","supplier","quantity","id","slowMoving","_p$supplier2"],"sources":["C:/Users/User/Downloads/Invent-frontend/frontend/src/pages/Reports.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { inventoryService } from '../services/inventoryService';\n\nconst Reports = () => {\n  const [reports, setReports] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      const data = await inventoryService.getInventoryReports();\n      setReports(data);\n    } catch (e) {\n      setError('Failed to load reports');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportCSV = () => {\n    // Use relative path so the CRA proxy routes to backend (port 7090)\n    window.location.href = '/api/inventory/reports/export/csv';\n  };\n\n  return (\n    <div>\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Reports & Analytics</h1>\n        <div className=\"page-actions\">\n          <button className=\"btn btn-warning\" onClick={exportCSV}>Export CSV</button>\n        </div>\n      </div>\n\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n\n      {loading ? (\n        <div className=\"loading-container\"><div className=\"loading-spinner\" /><p>Loading...</p></div>\n      ) : reports ? (\n        <div className=\"row\">\n          <div className=\"col-4\">\n            <div className=\"stat-card\">\n              <div className=\"stat-number\">{reports.turnoverRate?.toFixed(2) || 0}</div>\n              <div className=\"stat-label\">Inventory Turnover Rate</div>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"stat-card\">\n              <div className=\"stat-number\">${reports.stockValuation?.toLocaleString() || 0}</div>\n              <div className=\"stat-label\">Stock Valuation</div>\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"stat-card\">\n              <div className=\"stat-number\">{reports.fastMoving?.length || 0}</div>\n              <div className=\"stat-label\">Fast-moving Products</div>\n            </div>\n          </div>\n\n          <div className=\"col-12\">\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"card-title\">Fast-moving Products</h3>\n              </div>\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Category</th>\n                    <th>Supplier</th>\n                    <th>Quantity</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {reports.fastMoving?.map(p => (\n                    <tr key={p.id}>\n                      <td>{p.name}</td>\n                      <td>{p.category}</td>\n                      <td>{p.supplier?.name || '-'}</td>\n                      <td>{p.quantity}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"col-12\">\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"card-title\">Slow-moving Products</h3>\n              </div>\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Category</th>\n                    <th>Supplier</th>\n                    <th>Quantity</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {reports.slowMoving?.map(p => (\n                    <tr key={p.id}>\n                      <td>{p.name}</td>\n                      <td>{p.category}</td>\n                      <td>{p.supplier?.name || '-'}</td>\n                      <td>{p.quantity}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <p>No report data.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Reports;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}